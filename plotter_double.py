import csv
import math
from scipy.stats import genpareto
import matplotlib.pyplot as plt
import numpy as numpy
import random
import numpy as np
import statistics
import csv
import matplotlib
from matplotlib.ticker import MaxNLocator
from waa.myglobal import *

plot_thru_droprate=False
plot_delay=False
plot_drop_prob=False
plot_delay_thru=True

DUAL_LOAD=[0, 11592916363.636364, 13390723137.2549, 15032741463.414633, 16824701395.348835, 18848991304.347828, 20631140000.0, 22608057777.77778, 24499001379.310345, 26020000000.0, 28232336000.0, 30039167999.999996]
DUAL_THRU=[0, 4075752727.272727, 4024834509.8039217, 4065998048.7804875, 4031136744.186046, 4062914782.6086955, 4016640000.0, 4081777777.777777, 4084700689.655172, 4096365714.285714, 4056832000.0, 3978752000.0]
DUAL_DROP=[0, 6016261818.181817, 8327861960.784313, 10537502439.02439, 12237378604.651163, 14184859130.434782, 15344417142.857143, 17220604444.444443, 19934835862.068962, 22001165714.285713, 23387392000.0, 22729280000.0]
DUAL_DELAY=[0, 0.01145858010936685, 0.013202037323204841, 0.014259308687607193, 0.013669656688767247, 0.01378449264917364, 0.013056054810868823, 0.013207214341262579, 0.014582186799913546, 0.01421542044320624, 0.015049151518826668, 0.011794039351292956]
DUAL_DROPPROP=[0, 0.5171368059420645, 0.6195907408090611, 0.7003589188515182, 0.7275303112178798, 0.7529227620793325, 0.7433176590569449, 0.7605461760754543, 0.8131205618193436, 0.8453037452205644, 0.8290065059132955, 0.7578607567729843]

WAA_LOAD=[0, 0, 0, 11402660000.0, 13327007457.627117, 15038647272.727272, 16786320879.12088, 18901306666.666668, 20650747118.644066, 22358424615.384613, 24468722962.96296, 26125100000.0, 28264145454.545452, 30019520000.0]
WAA_THRU=[0, 0, 0, 9830320000.0, 9827959322.033897, 9823576363.636364, 9825650989.010988, 9817177142.857143, 9819623050.847458, 9829558974.358973, 9826151111.11111, 9824030000.0, 9828538181.818182, 9824017777.777777]
WAA_DROP=[0, 0, 0, 2946180000.0, 4583175593.220339, 5698370909.090909, 7324436043.956043, 8947718095.238094, 9364604745.76271, 10727195897.435898, 13350394074.074074, 14501770000.0, 8689367272.727272, 13274684444.444445]
WAA_DELAY=[0, 0, 0, 0.0018743215460891513, 0.0015686287522181349, 0.001296579164280995, 0.00126166173775118, 0.0013513808883989767, 0.0009627928750430833, 0.0010995699495152354, 0.0011944639347018452, 0.001079225349080411, 0.0006746395285179411, 0.0006762244891287002]
WAA_DROPPROP=[0, 0, 0, 0.25793729064526383, 0.3428864849763905, 0.37827702298999816, 0.43558652554750876, 0.47260036657306226, 0.45260066265004073, 0.4782343765596366, 0.5454469406998681, 0.5548387411182709, 0.30502006653634656, 0.4429499227311949]

if plot_thru_droprate:
    plt.plot(DUAL_LOAD, DUAL_THRU,'b', label="DUAL Throughput")
    plt.plot(WAA_LOAD, WAA_THRU,'r', label="WAA Throughput")
    plt.plot(DUAL_LOAD, DUAL_DROP,'b--', label="DUAL Droprate")
    plt.plot(WAA_LOAD, WAA_DROP,'r--', label="WAA Droprate")
    plt.xlabel('Load (bps)', fontsize=25)
    plt.ylabel('Bitrate', fontsize=25)
    plt.title('Throughput & Droprate', fontsize=25)
elif plot_delay:
    plt.plot(DUAL_LOAD, DUAL_DELAY,'b', label="DUAL Delay")
    plt.plot(WAA_LOAD, WAA_DELAY,'r', label="WAA Delay")
    plt.xlabel('Load (bps)', fontsize=25)
    plt.ylabel('Delay (sec)', fontsize=25)
    plt.title('Average Delay', fontsize=25)
elif plot_drop_prob:
    plt.plot(DUAL_LOAD, DUAL_DROPPROP,'b', label="DUAL Pr[Drop]")
    plt.plot(WAA_LOAD, WAA_DROPPROP,'r', label="WAA Pr[Drop]")
    plt.xlabel('Load (bps)', fontsize=25)
    plt.ylabel('Probability', fontsize=25)
    plt.title('Dropping Probability', fontsize=25)
elif plot_delay_thru:
    plt.plot(DUAL_THRU, DUAL_DELAY,'b', label="DUAL")
    plt.plot(WAA_THRU, WAA_DELAY,'r', label="WAA")
    plt.xlabel('Throughput (bps)', fontsize=25)
    plt.ylabel('Delay (sec)', fontsize=25)
    plt.title('Delay w.r.t throughput', fontsize=25)

# Common
plt.grid(True, which='major', axis='both')
plt.legend()
plt.show()


